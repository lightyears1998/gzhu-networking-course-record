---
layout: post
title:  "Task 7: OSPF å’Œ RIP"
date:   2020-06-10 15:00:00 +0800
categories: [router, switch, osfp, rip]
---

æœ¬å‘¨çš„é‡ç‚¹ç»ˆäºåˆ°äº†è·¯ç”±åè®®ï¼ŒğŸ¦ŒåŒ—é¹¿è€å¸ˆè¿™æ¬¡ä¸‹ä»¤æˆ‘ä»¬åš OSFP å’Œ RIPã€‚

æŒ‰ç…§åœ¨æ¨¡æ‹Ÿä¸Šåšå®éªŒçš„å†…å®¹çœ‹ï¼ŒH3C çš„äº¤æ¢æœºçš„åŠŸèƒ½è·Ÿè·¯ç”±å™¨æœ‰å¾—ä¸€æ‹¼ã€‚
æœç„¶ç½‘ç»œæ ¸å¿ƒçš„ç¡¬ä»¶ä¼šâ€œé¢ è¦†â€æ™®é€šç”¨æˆ·çš„ä¸€äº›è®¤çŸ¥ã€‚

---

## å¼€æ”¾å¼æœ€çŸ­è·¯å¾„ä¼˜å…ˆåè®® Open Shortest Path First, OSPF

![ç½‘ç»œæ‹“æ‰‘](https://lightyears1998.github.io/gzhu-networking-course-record/images/task7-1.png)

è¿™æ˜¯æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªä½¿ç”¨è·¯ç”±å™¨çš„å®éªŒã€‚åœ¨è·¯ç”±å™¨ä¸Šçš„é…ç½®å‘½ä»¤å¦‚ä¸‹ï¼š

``` shell
# RT1
sys
sysname RT1

ospf 1 router-id 1.1.1.1
area 0
network 192.168.1.1 0.0.0.0
network 10.1.1.1 0.0.0.0

int loopback 0
ip addr 192.168.1.1 255.255.255.255

int ge 0/0
ip addr 10.1.1.1 255.255.255.0

# RT2
sys
sysname RT2

ospf 2
area 0
network 10.1.1.2 0.0.0.0
area 1
network 20.1.1.1 0.0.0.0

int loopback 1
ip addr 2.2.2.2 255.255.255.255

int ge 0/0
ip addr 10.1.1.2
int ge 0/1
ip addr 20.1.1.1

# RT3
sys
sysname RT3

ospf 3 router-id 3.3.3.3
area 1
network 192.168.3.1 0.0.0.0
network 20.1.1.2 0.0.0.0

int loopback 0
ip addr 192.168.3.1 255.255.255.255

int ge 0/1
ip addr 20.1.1.2 255.255.255.0
```

å¯ä»¥ä½¿ç”¨ `disp ospf routing` å‘½ä»¤æ¥æŸ¥çœ‹è®¾å¤‡ä¸Šçš„è®¾ç½®ã€‚

é€šè¿‡ Ping æ¥éªŒè¯è·¯ç”±å™¨ä¹‹é—´çš„è¿é€šæ€§ï¼Œç”±äºä½¿ç”¨äº† loopback æ¥å£ï¼Œåœ¨ä½¿ç”¨ `ping` å‘½ä»¤æ—¶å€™éœ€è¦æŒ‡å®šæº IPï¼š

``` shell
# From RT1
ping -a 192.168.1.1 192.168.3.1 # å¯é€š
```

## è·¯ç”±ä¿¡æ¯åè®® Routing Infomation Protocol, RIP

![ç½‘ç»œæ‹“æ‰‘](https://lightyears1998.github.io/gzhu-networking-course-record/images/task7-2.png)

åœ¨äº¤æ¢æœºä¸Šçš„é…ç½®å‘½ä»¤å¦‚ä¸‹ï¼š

``` shell
# SW1
sys
sysname SW1

int ge 1/0/1
port link-mode route
ip addr 30.1.1.1 24

int loopback 1
ip addr 172.16.1.1 32

rip
version 2
undo summary
network 30.1.1.0
network 172.16.1.1

# SW2
sys
sysname SW2

int ge 1/0/1
port link-mode route
ip addr 30.1.1.2 24

int ge 1/0/2
port link-mode route
ip addr 40.1.1.1 24

rip
version 2
undo summary
network 30.1.1.0
network 40.1.1.0

# SW3
sys
sysname SW3

int ge 1/0/2
port link-mode route
ip addr 40.1.1.2 24

int loopback 1
ip addr 192.168.2.1 32

rip
version 2
undo summary
network 192.168.2.1
network 40.1.1.0
```

å¯ä»¥ä½¿ç”¨ `disp ip routing-table` å‘½ä»¤æ¥æŸ¥çœ‹è®¾å¤‡ä¸Šçš„è®¾ç½®ã€‚

é€šè¿‡ Ping æ¥éªŒè¯äº¤æ¢æœºä¹‹é—´çš„è¿é€šæ€§ï¼Œç”±äºä½¿ç”¨äº† loopback æ¥å£ï¼Œåœ¨ä½¿ç”¨ `ping` å‘½ä»¤æ—¶å€™éœ€è¦æŒ‡å®šæº IPï¼š

``` shell
# From SW1
ping -a 172.16.1.1 192.168.2.1
```
